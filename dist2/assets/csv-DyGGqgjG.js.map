{"version":3,"file":"csv-DyGGqgjG.js","sources":["../../src/features/csv.js"],"sourcesContent":["// ── CSV IMPORT/EXPORT ───────────────────────────────────────────────────────────\n\nimport { inv, sales, expenses, save, refresh } from '../data/store.js';\nimport { fmt, pct, uid } from '../utils/format.js';\nimport { toast } from '../utils/dom.js';\nimport { _sfx } from '../utils/sfx.js';\nimport { getPlatforms } from './platforms.js';\nimport { calc } from '../data/store.js';\nimport { autoSync } from '../data/sync.js';\n\nexport function exportCSV(){\n  const rows=[['Name','SKU','UPC','Category','Subcategory','Source','Condition','Platforms','Qty','Cost','Price','Fees','Ship','Margin','Notes','Added','ISBN','Author','Publisher','Edition','Printing','Year','Signed','Sales Rank']];\n  for(const i of inv){const {m}=calc(i);rows.push([i.name,i.sku||'',i.upc||'',i.category||'',i.subcategory||'',i.source||'',i.condition||'',getPlatforms(i).join(';'),i.qty,i.cost,i.price,i.fees||0,i.ship||0,pct(m),i.notes||'',i.added||'',i.isbn||'',i.author||'',i.publisher||'',i.edition||'',i.printing||'',i.pubYear||'',i.signed?'Yes':'',i.salesRank||'']);}\n  const csv=rows.map(r=>r.map(v=>`\"${String(v).replace(/\"/g,'\"\"')}\"`).join(',')).join('\\n');\n  const a=document.createElement('a');a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(csv);a.download='fliptrack-inventory.csv';a.click();toast('Inventory CSV exported ✓');\n}\n\nexport function exportSalesCSV() {\n  const rows=[['Date','Item Name','SKU','Platform','Qty','Sale Price','List Price','Fees','Shipping','Profit']];\n  for (const s of sales) {\n    const it = inv.find(i => i.id === s.itemId);\n    const pr = (s.price||0)*(s.qty||0) - (it?(it.cost||0)*(s.qty||0):0) - (s.fees||0) - (s.ship||0);\n    rows.push([s.date, it?it.name:'Deleted Item', it?it.sku:'', s.platform||'', s.qty, s.price, s.listPrice||'', s.fees||0, s.ship||0, pr.toFixed(2)]);\n  }\n  const csv=rows.map(r=>r.map(v=>`\"${String(v).replace(/\"/g,'\"\"')}\"`).join(',')).join('\\n');\n  const a=document.createElement('a');a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(csv);a.download='fliptrack-sales.csv';a.click();toast('Sales CSV exported ✓');\n}\n\nexport function exportExpensesCSV() {\n  const rows=[['Date','Category','Description','Amount']];\n  for (const e of expenses) {\n    rows.push([e.date, e.category, e.description, e.amount]);\n  }\n  const csv=rows.map(r=>r.map(v=>`\"${String(v).replace(/\"/g,'\"\"')}\"`).join(',')).join('\\n');\n  const a=document.createElement('a');a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(csv);a.download='fliptrack-expenses.csv';a.click();toast('Expenses CSV exported ✓');\n}\n\nexport function exportAll() {\n  exportCSV();\n  setTimeout(() => exportSalesCSV(), 300);\n  setTimeout(() => exportExpensesCSV(), 600);\n}\n\nexport function importCSV(file) {\n  if (!file) return;\n  if (file.size > 5 * 1024 * 1024) { toast('CSV too large (max 5MB)', true); return; }\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    try {\n      const text = e.target.result;\n      const sep = text.indexOf('\\t') !== -1 && text.indexOf(',') === -1 ? '\\t' : ',';\n      const lines = [];\n      let current = '', inQuote = false;\n      for (let i = 0; i < text.length; i++) {\n        const ch = text[i];\n        if (ch === '\"') { inQuote = !inQuote; current += ch; }\n        else if ((ch === '\\n' || ch === '\\r') && !inQuote) {\n          if (current.trim()) lines.push(current);\n          current = '';\n          if (ch === '\\r' && text[i+1] === '\\n') i++;\n        } else { current += ch; }\n      }\n      if (current.trim()) lines.push(current);\n\n      if (lines.length < 2) { toast('CSV appears empty', true); return; }\n\n      // Parse header\n      const parseRow = (line) => {\n        const cells = []; let cell = '', inQ = false;\n        for (let i = 0; i < line.length; i++) {\n          const c = line[i];\n          if (c === '\"') {\n            if (inQ && line[i+1] === '\"') { cell += '\"'; i++; }\n            else inQ = !inQ;\n          } else if (c === sep && !inQ) { cells.push(cell.trim()); cell = ''; }\n          else cell += c;\n        }\n        cells.push(cell.trim());\n        return cells;\n      };\n\n      const headers = parseRow(lines[0]).map(h => h.toLowerCase().replace(/[^a-z0-9]/g, ''));\n      const colMap = {};\n      // Map common header names to our fields\n      const aliases = {\n        name: ['name','title','itemname','item','productname','product'],\n        sku: ['sku','itemsku','productsku'],\n        upc: ['upc','barcode','ean','gtin'],\n        category: ['category','cat','type','department'],\n        subcategory: ['subcategory','subcat','subcategory'],\n        source: ['source','sourcedfrom','wherebought','store'],\n        condition: ['condition','cond','itemcondition'],\n        platform: ['platform','platforms','marketplace','channel'],\n        qty: ['qty','quantity','stock','units','qtyavailable'],\n        cost: ['cost','costprice','purchaseprice','cogs','buyprice','pricepaid'],\n        price: ['price','listprice','sellingprice','askingprice','listingprice','saleprice'],\n        fees: ['fees','platformfees','sellingfees'],\n        ship: ['ship','shipping','shippingcost'],\n        notes: ['notes','description','comments','memo'],\n        isbn: ['isbn','isbn10','isbn13','isbnno'],\n        author: ['author','authors','writer','by'],\n        publisher: ['publisher','pub','publishedby'],\n        edition: ['edition','ed'],\n        printing: ['printing','print','printrun'],\n        pubYear: ['year','yearpublished','pubyear','publishyear','publicationyear'],\n        signed: ['signed','autographed','signature'],\n        salesRank: ['salesrank','amazonrank','rank','bsr'],\n      };\n\n      for (const [field, names] of Object.entries(aliases)) {\n        const idx = headers.findIndex(h => names.includes(h));\n        if (idx !== -1) colMap[field] = idx;\n      }\n\n      if (colMap.name === undefined) {\n        toast('CSV needs a \"Name\" column', true);\n        return;\n      }\n\n      const rows = lines.length - 1;\n      if (rows > 10000) { toast('Too many rows (max 10,000)', true); return; }\n\n      let imported = 0, skipped = 0;\n      for (let r = 1; r < lines.length; r++) {\n        const row = parseRow(lines[r]);\n        const name = (row[colMap.name] || '').trim();\n        if (!name) { skipped++; continue; }\n\n        const cat = colMap.category !== undefined ? (row[colMap.category] || '').trim() : '';\n        const skuDate = new Date().toISOString().slice(0,10).replace(/-/g,'');\n        const skuCat = (cat || 'GEN').toUpperCase().replace(/[^A-Z0-9]/g,'').slice(0,4).padEnd(3,'X');\n        const skuRand = Math.random().toString(36).slice(2,5).toUpperCase();\n\n        const platStr = colMap.platform !== undefined ? (row[colMap.platform] || '').trim() : '';\n        const plats = platStr ? platStr.split(/[;,|]/).map(p => p.trim()).filter(Boolean) : [];\n\n        const item = {\n          id: uid(),\n          name,\n          sku: colMap.sku !== undefined ? (row[colMap.sku] || '').trim() || (skuCat + '-' + skuDate + '-' + skuRand) : skuCat + '-' + skuDate + '-' + skuRand,\n          upc: colMap.upc !== undefined ? (row[colMap.upc] || '').trim() : '',\n          category: cat,\n          subcategory: colMap.subcategory !== undefined ? (row[colMap.subcategory] || '').trim() : '',\n          subtype: '',\n          platform: plats[0] || 'Other',\n          platforms: plats,\n          cost: colMap.cost !== undefined ? (parseFloat(row[colMap.cost]) || 0) : 0,\n          price: colMap.price !== undefined ? (parseFloat(row[colMap.price]) || 0) : 0,\n          qty: colMap.qty !== undefined ? (parseInt(row[colMap.qty]) || 1) : 1,\n          bulk: false,\n          fees: colMap.fees !== undefined ? (parseFloat(row[colMap.fees]) || 0) : 0,\n          ship: colMap.ship !== undefined ? (parseFloat(row[colMap.ship]) || 0) : 0,\n          lowAlert: 2,\n          notes: colMap.notes !== undefined ? (row[colMap.notes] || '').trim() : '',\n          source: colMap.source !== undefined ? (row[colMap.source] || '').trim() : '',\n          condition: colMap.condition !== undefined ? (row[colMap.condition] || '').trim() : '',\n          images: [],\n          image: null,\n          added: new Date().toISOString(),\n        };\n        // Book fields (only if present in CSV)\n        if (colMap.isbn !== undefined) item.isbn = (row[colMap.isbn] || '').trim();\n        if (colMap.author !== undefined) item.author = (row[colMap.author] || '').trim();\n        if (colMap.publisher !== undefined) item.publisher = (row[colMap.publisher] || '').trim();\n        if (colMap.edition !== undefined) item.edition = (row[colMap.edition] || '').trim();\n        if (colMap.printing !== undefined) item.printing = (row[colMap.printing] || '').trim();\n        if (colMap.pubYear !== undefined) item.pubYear = parseInt(row[colMap.pubYear]) || null;\n        if (colMap.signed !== undefined) item.signed = ['yes','true','1','y'].includes((row[colMap.signed]||'').trim().toLowerCase());\n        if (colMap.salesRank !== undefined) item.salesRank = parseInt(row[colMap.salesRank]) || null;\n        inv.push(item);\n        imported++;\n      }\n\n      if (!imported) { toast('No valid rows found', true); return; }\n\n      save(); refresh(); _sfx.create();\n      toast(imported + ' item' + (imported !== 1 ? 's' : '') + ' imported ✓' + (skipped ? ' (' + skipped + ' skipped)' : ''));\n      autoSync();\n    } catch (err) {\n      toast('Import error: ' + (err.message || 'unknown'), true);\n    }\n    // Reset file input so same file can be re-imported\n    document.getElementById('csvImportInput').value = '';\n  };\n  reader.readAsText(file);\n}\n"],"names":["exportCSV","rows","i","inv","m","calc","getPlatforms","pct","csv","r","v","a","toast","exportSalesCSV","s","sales","it","pr","exportExpensesCSV","expenses","exportAll","importCSV","file","reader","e","text","sep","lines","current","inQuote","ch","parseRow","line","cells","cell","inQ","c","headers","h","colMap","aliases","field","names","idx","imported","skipped","row","name","cat","skuDate","skuCat","skuRand","platStr","plats","p","item","uid","save","refresh","_sfx","autoSync","err"],"mappings":"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"}